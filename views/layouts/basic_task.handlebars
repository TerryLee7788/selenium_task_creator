var lib_list = require('../../lib/basic_libs').lib(global);

test.describe('{{describe}}', function() {
  var url = '{{url}}',
      lang = '?lang={{lang}}',
      driver,

  tryAsyn = function (done) {
    var timer = 2000,
        second = (timer / 1000);
    console.log('{{describe}} test will start after ' + second + ((second >= 10) ? (' seconds') : (' second')) );

    // if a function is asyn, simply accept a callback argument
    setTimeout(done, timer);
    // Test will started after "timer" seconds
  },
  checkTitle = function (title) {
    return until.titleContains(title);
  };

  /*****
   * specify the timeout on the test
   * or you can just ("mocha test.js --timeout 15000" / "mocha test.js -t 15000")
   *****/
  this.timeout(current_timer);

  test.before(function () {
    driver = new webdriver.Builder().
              forBrowser('chrome').
              build();
  });

  test.after(function () {
    driver.close();
  });

  test.beforeEach(tryAsyn);

  test.afterEach(function () {
    console.log('{{describe}} test end');
  });

  test.it('fullscreen', function () {
    // set full screen
    driver.manage().window().maximize();
  });

{{#each it}}
  // Start test details
  test.it('{{it_name}}', function () { {{!--
--}}{{#each events}}
    {{!--
  --}}{{#if action}}{{!--
    --}}action{{!--
  --}}{{/if}}{{!--
  --}}{{!--
  --}}{{#if check}}{{!--
  --}}{{!-- check --}}{{!--
    --}}{{#if elementIsVisible}}{{!--
        --}}driver.wait(until.elementIsVisible(driver.findElement(By.id("{{functions_keys}}"))), 2000);{{!--
    --}}{{/if}}{{!--

    --}}{{#if elementTextContains}}{{!--
        --}}driver.wait(until.elementTextContains(driver.findElement(By.id("{{functions_keys}}")), "{{sendKeys}}"), 5000);{{!--
    --}}{{/if}}{{!--

    --}}{{#if titleContains}}{{!--
        --}}driver.wait(until.titleContains("{{functions_keys}}"), 3000);{{!--
    --}}{{/if}}{{!--
  --}}{{/if}}{{!--
--}}{{/each}}
  });
{{/each}}{{!--
   test.it('Try to open google web', function() {

    // set full screen
    driver.manage().window().maximize();
    
    // Go the "url" page
    driver.get(url + lang);

    // try to checking things
    driver.findElement(By.name('q')).sendKeys(['webdriver' + Key.ESCAPE]);
    
    // The "click" means "mouse click"
    driver.findElement(By.name('btnK')).click();
    
    driver.wait(checkTitle('webdriver'), 5000, 'checking title end.');
    driver.getTitle().then(function (title) {
      console.log('Current page title: ' + title);
    });

  }); 
  --}}
});